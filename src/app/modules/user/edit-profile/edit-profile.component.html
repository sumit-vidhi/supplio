<div
  class="kt-body kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor kt-grid--stretch"
  id="kt_body"
>
  <div
    class="kt-content kt-content--fit-top kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor"
    id="kt_content"
  >
    <!-- begin:: Subheader -->
    <div class="kt-subheader kt-grid__item" id="kt_subheader">
      <div class="kt-container">
        <div class="kt-subheader__main">
          <h3 class="kt-subheader__title">
            Profile
          </h3>
        </div>
        <div class="kt-subheader__toolbar">
          <div class="kt-subheader__wrapper"></div>
        </div>
      </div>
    </div>

    <!-- end:: Subheader -->

    <!-- begin:: Content -->
    <div class="kt-container kt-grid__item kt-grid__item--fluid">
      <div class="kt-portlet">
        <div class="kt-portlet__body kt-portlet__body--fit">
          <div class="row stepsWizard">
            <div class="col-md-3 stepsList">
              <ul class="steps">
                <li
                  (click)="changeStep('step1')"
                  [ngClass]="{
                    completed: isTabActive(1),
                    disabled: isTabDisabled(1),
                    active: !isTabDisabled(1)
                  }"
                >
                  <a (click)="showTab(1)" role="tab" title="Basic Information">
                    Basic Information
                    <span class="first icon"
                      ><i class="fa fa-circle"></i>
                    </span>
                  </a>
                </li>
                <li
                  (click)="changeStep('step2')"
                  [ngClass]="{
                    completed: isTabActive(2),
                    disabled: isTabDisabled(2),
                    active: !isTabDisabled(2)
                  }"
                  class=""
                >
                  <a (click)="showTab(2)" role="tab" title="Locations"
                    >Locations
                    <span class="icon"><i class="fa fa-circle"></i> </span
                  ></a>
                </li>
                <li
                  (click)="changeStep('step3')"
                  [ngClass]="{
                    completed: isTabActive(3),
                    disabled: isTabDisabled(3),
                    active: !isTabDisabled(3)
                  }"
                >
                  <a (click)="showTab(3)" role="tab" title="About"
                    >About
                    <span class="icon"><i class="fa fa-circle"></i> </span
                  ></a>
                </li>
                <li
                  (click)="changeStep('step4')"
                  [ngClass]="{
                    completed: isTabActive(4),
                    disabled: isTabDisabled(4),
                    active: !isTabDisabled(4)
                  }"
                  class=""
                >
                  <a (click)="showTab(4)" role="tab" title="Documents"
                    >Documents
                    <span class="icon"><i class="fa fa-circle"></i> </span
                  ></a>
                </li>
                <li
                  (click)="changeStep('step5')"
                  [ngClass]="{
                    completed: isTabActive(5),
                    disabled: isTabDisabled(5),
                    active: !isTabDisabled(5)
                  }"
                  class=""
                >
                  <a (click)="showTab(5)" role="tab" title="Review & Submit"
                    >Review & Submit
                    <span class="icon"><i class="fa fa-circle"></i> </span
                  ></a>
                </li>
              </ul>
            </div>
            <div class="col-md-9">
              <div
                class="stepContainer"
                id="step1"
                [ngClass]="{
                  'is-display': isTabActive(1),
                  'is-hide': !isTabActive(1)
                }"
              >
                <h3>Basic Information</h3>
                <form
                  class="kt-form"
                  id="kt_form"
                  novalidate="novalidate"
                  [formGroup]="editForm"
                  (ngSubmit)="onSubmit()"
                >
                  <div class="kt-form__section kt-form__section--first">
                    <div class="kt-wizard-v2__form">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Company Legal Name *</label>
                            <input
                              type="text"
                              class="form-control"
                              formControlName="agency_name"
                              placeholder="Company Legal Name"
                              aria-describedby="fname-error"
                              [ngClass]="{
                                'is-invalid': submitted && f.agency_name.errors
                              }"
                            />
                            <div
                              *ngIf="submitted && f.agency_name.errors"
                              class="invalid-feedback"
                            >
                              <div *ngIf="f.agency_name.errors.required">
                                Company name is required
                              </div>
                            </div>
                            <!-- <span class="form-text text-muted">Please enter your first name.</span> -->
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Phone Number *</label>

                            <ngx-intl-tel-input
                              [cssClass]="'custom'"
                              [preferredCountries]="preferredCountries"
                              [enableAutoCountrySelect]="false"
                              [enablePlaceholder]="true"
                              [searchCountryFlag]="true"
                              [searchCountryField]="[
                                SearchCountryField.Iso2,
                                SearchCountryField.Name
                              ]"
                              [selectFirstCountry]="false"
                              [selectedCountryISO]="this.countryCode"
                              [maxLength]="15"
                              [tooltipField]="TooltipLabel.Name"
                              [phoneValidation]="true"
                              [separateDialCode]="separateDialCode"
                              formControlName="phone_number"
                              [ngClass]="{
                                'is-invalid': submitted && f.phone_number.errors
                              }"
                            >
                            </ngx-intl-tel-input>
                            <!-- <input type="text" class="form-control" formControlName="phone_number"
                              placeholder="Phone number with country code" aria-describedby="fname-error" [ngClass]="{
                                'is-invalid': submitted && f.phone_number.errors
                              }" /> -->
                            <div
                              *ngIf="submitted && f.phone_number.errors"
                              class="invalid-feedback"
                            >
                              <div *ngIf="f.phone_number.errors.required">
                                Phone number is required
                              </div>
                              <div
                                *ngIf="
                                  !f.phone_number.errors.validatePhoneNumber
                                    .valid
                                "
                              >
                                Please enter correct phone number.
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Year of establishment *</label>
                            <select
                              class="form-control"
                              formControlName="year_of_establishment"
                              [ngClass]="{
                                'is-invalid':
                                  submitted && f.year_of_establishment.errors
                              }"
                            >
                              <option [ngValue]="null" disabled
                                >Select year</option
                              >

                              <option
                                *ngFor="let data of years"
                                [ngValue]="data"
                                >{{ data }}</option
                              >
                            </select>
                            <div
                              *ngIf="
                                submitted && f.year_of_establishment.errors
                              "
                              class="invalid-feedback"
                            >
                              <div
                                *ngIf="f.year_of_establishment.errors.required"
                              >
                                Year of establishment is required
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Company Size *</label>
                            <select
                              class="form-control"
                              formControlName="company_size"
                              [ngClass]="{
                                'is-invalid': submitted && f.company_size.errors
                              }"
                            >
                              <option [ngValue]="null" disabled
                                >Select Company Size</option
                              >
                              <option value="Small < 50">Small 50 </option>
                              <option value="Medium 50-500"
                                >Medium 50-500</option
                              >
                              <option value="Large 500-2000"
                                >Large 500-2000</option
                              >
                              <option value="Enterprise 2000+">
                                Enterprise 2000+</option
                              >
                            </select>

                            <div
                              *ngIf="submitted && f.company_size.errors"
                              class="invalid-feedback"
                            >
                              <div *ngIf="f.company_size.errors.required">
                                Company size is required
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Website *</label>
                            <input
                              type="text"
                              class="form-control"
                              formControlName="website"
                              placeholder="Company Website"
                              aria-describedby="fname-error"
                              [ngClass]="{
                                'is-invalid': submitted && f.website.errors
                              }"
                            />
                            <div
                              *ngIf="submitted && f.website.errors"
                              class="invalid-feedback"
                            >
                              <div *ngIf="f.website.errors.required">
                                Website is required
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <label
                              >Company Owner Name/ Authorized Signatory *</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              formControlName="owner_name"
                              placeholder="Company Owner Name/ Authorized Signatory"
                              aria-describedby="fname-error"
                              [ngClass]="{
                                'is-invalid': submitted && f.owner_name.errors
                              }"
                            />
                            <div
                              *ngIf="submitted && f.owner_name.errors"
                              class="invalid-feedback"
                            >
                              <div *ngIf="f.owner_name.errors.required">
                                Owner name is required
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Designation of Authorized Signatory *</label>
                            <input
                              type="text"
                              class="form-control"
                              formControlName="designation"
                              placeholder="Designation of Authorized Signatory "
                              aria-describedby="fname-error"
                              [ngClass]="{
                                'is-invalid': submitted && f.designation.errors
                              }"
                            />
                            <div
                              *ngIf="submitted && f.designation.errors"
                              class="invalid-feedback"
                            >
                              <div *ngIf="f.designation.errors.required">
                                Designation is required
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="stepButtons">
                        <button
                          type="submit"
                          class="pull-right btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                          data-ktwizard-type="action-next"
                        >
                          <span>
                            <span>Next Step</span>
                            <i class="la la-angle-right"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>

              <!--end: Form Wizard Step 1-->

              <!--begin: Form Wizard Step 2-->
              <div
                class="stepContainer"
                id="step1"
                [ngClass]="{
                  'is-display': isTabActive(2),
                  'is-hide': !isTabActive(2)
                }"
              >
                <form
                  class="kt-form"
                  id="kt_form"
                  novalidate="novalidate"
                  [formGroup]="locationForm"
                  (ngSubmit)="locationSubmit()"
                >
                  <div class="kt-heading kt-heading--md">
                    <h3>Locations</h3>
                  </div>
                  <div class="kt-form__section kt-form__section--first">
                    <div class="kt-wizard-v2__form">
                      <div class="row">
                        <div class="col-xl-12">
                          <div class="form-group">
                            <label>Address</label>
                            <div
                              formArrayName="location"
                              *ngFor="
                                let arrayItem of locationForm.get('location')[
                                  'controls'
                                ];
                                let i = index
                              "
                            >
                              <div
                                [formGroupName]="i"
                                [ngClass]="{
                                  'is-invalid':
                                    locationSubmitted && getValidity(i)
                                }"
                              >
                                <AutocompleteComponent
                                  (setAddress)="getAddress($event, i)"
                                  adressType="establishment"
                                  address="{{ arrayItem.value.address }}"
                                >
                                </AutocompleteComponent>
                                <input
                                  formControlName="orders"
                                  (change)="changeCompany(i)"
                                  type="radio"
                                  name="orders"
                                  [value]="i"
                                />Headquater
                                <!-- <input type="text" class="form-control" formControlName="address"
                                  placeholder="Type in your address" aria-describedby="address1-error" /> -->
                                <a
                                  href="javscript:;"
                                  class="deleteLocation"
                                  *ngIf="
                                    locationForm.controls['location'].controls
                                      .length > 1
                                  "
                                  (click)="removeItem(i)"
                                  ><i
                                    class="fa fa-trash"
                                    aria-hidden="true"
                                  ></i>
                                </a>
                                <div
                                  class="form-text text-muted invalid-feedback"
                                  *ngIf="locationSubmitted && getValidity(i)"
                                >
                                  Please enter your Address.
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-4">
                          <div>
                            <a
                              (click)="addItem()"
                              class="btn btn-primary addLocation"
                              ><i class="fa fa-plus"></i> Add Location</a
                            >
                          </div>
                        </div>
                      </div>
                      <div class="stepButtons">
                        <a
                          class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                          (click)="goPrevious()"
                          data-ktwizard-type="action-prev"
                        >
                          <span>
                            <i class="la la-angle-left"></i>
                            <span>Previous</span>
                          </span>
                        </a>
                        <button
                          type="submit"
                          class="pull-right btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                          data-ktwizard-type="action-next"
                        >
                          <span>
                            <span>Next Step</span>
                            <i class="la la-angle-right"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>

              <!--end: Form Wizard Step 2-->

              <!--begin: Form Wizard Step 3-->
              <div
                class="stepContainer"
                id="step1"
                [ngClass]="{
                  'is-display': isTabActive(3),
                  'is-hide': !isTabActive(3)
                }"
              >
                <div class="kt-heading kt-heading--md">
                  <h3>Tell us about your company (Optional)</h3>
                </div>
                <div class="kt-form__section kt-form__section--first">
                  <form
                    class="kt-form"
                    id="kt_form"
                    novalidate="novalidate"
                    [formGroup]="aboutForm"
                    (ngSubmit)="aboutSubmit()"
                  >
                    <div class="kt-wizard-v2__form">
                      <div class="form-group">
                        <label>About</label>
                        <ckeditor
                          formControlName="about_company"
                          [config]="ckeConfig"
                          debounce="500"
                        >
                        </ckeditor>
                      </div>
                      <div class="stepButtons">
                        <a
                          (click)="goPrevious()"
                          class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                          data-ktwizard-type="action-prev"
                        >
                          <span>
                            <i class="la la-angle-left"></i>
                            <span>Previous</span>
                          </span>
                        </a>
                        <button
                          type="submit"
                          class="pull-right btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                          data-ktwizard-type="action-next"
                        >
                          <span>
                            <span>Next Step</span>
                            <i class="la la-angle-right"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>

              <!--end: Form Wizard Step 3-->
              <div
                class="stepContainer"
                id="step1"
                [ngClass]="{
                  'is-display': isTabActive(4),
                  'is-hide': !isTabActive(4)
                }"
              >
                <div class="kt-heading kt-heading--md">
                  <h3>Documents</h3>
                </div>
                <div class="kt-form__section kt-form__section--first">
                  <div class="kt-wizard-v2__form">
                    <form
                      class="kt-form"
                      id="kt_form"
                      novalidate="novalidate"
                      [formGroup]="imageForm"
                      (ngSubmit)="imageSubmit()"
                      enctype="multipart/form-data"
                    >
                      <div class="form-group">
                        <label>Trade Licence</label>
                        <div class="custom-file">
                          <input
                            type="file"
                            class="custom-file-input"
                            formControlName="myFile"
                            id="importFile"
                            (change)="fileEvent($event)"
                          />
                          <label
                            class="custom-file-label"
                            #labelImport
                            for="importFile"
                          >
                            Choose file</label
                          >
                          <!-- <input type="file" formControlName="myFile" (change)="fileEvent($event)" /> -->
                          <div
                            *ngIf="imageSubmitted && i.myFile.errors"
                            style="color: red;"
                          >
                            <div *ngIf="i.myFile.errors.required">
                              Trade Licence is required
                            </div>
                          </div>
                        </div>
                        <div *ngIf="image.trade_license">
                          <a href="{{ image.trade_license }}" target="_blank">
                            <i
                              class="{{
                                getFileExtension(image.trade_license)
                              }}"
                              style="color: #5cb85c;"
                              aria-hidden="true"
                            ></i>
                            {{ imageName.trade_license }}</a
                          >
                          <a
                            class="deleteLocation"
                            href="javscript:;"
                            (click)="deleteImage('trade_license', 'myFile')"
                            ><i aria-hidden="true" class="fa fa-trash"></i
                          ></a>
                        </div>
                      </div>
                      <div class="form-group">
                        <label>Proof of identity</label>
                        <!-- <input type="file" formControlName="identity" (change)="fileIdentityEvent($event)" /> -->
                        <div class="custom-file">
                          <input
                            type="file"
                            class="custom-file-input"
                            formControlName="identity"
                            id="importFile"
                            (change)="fileIdentityEvent($event)"
                          />
                          <label
                            class="custom-file-label"
                            #labelidentityImport
                            for="importFile"
                          >
                            Choose file</label
                          >
                          <div
                            *ngIf="imageSubmitted && i.identity.errors"
                            style="color: red;"
                          >
                            <div *ngIf="i.identity.errors.required">
                              Proof of identity is required
                            </div>
                          </div>
                        </div>
                        <div *ngIf="image.proof_of_identity">
                          <a
                            href="{{ image.proof_of_identity }}"
                            target="_blank"
                            ><i
                              class="{{
                                getFileExtension(image.proof_of_identity)
                              }}"
                              style="color: #5cb85c;"
                              aria-hidden="true"
                            ></i>
                            {{ imageName.proof_of_identity }}</a
                          >
                          <a
                            class="deleteLocation"
                            href="javscript:;"
                            (click)="
                              deleteImage('proof_of_identity', 'identity')
                            "
                            ><i aria-hidden="true" class="fa fa-trash"></i
                          ></a>
                        </div>
                      </div>
                      <div class="form-group">
                        <label>Compony Logo</label>
                        <!-- <input type="file" formControlName="logo" (change)="fileLogoEvent($event)" /> -->
                        <div class="custom-file">
                          <input
                            type="file"
                            class="custom-file-input"
                            formControlName="logo"
                            id="importFile"
                            (change)="fileLogoEvent($event)"
                          />
                          <label
                            class="custom-file-label"
                            #labellogoImport
                            for="importFile"
                          >
                            Choose file</label
                          >
                          <div
                            *ngIf="imageSubmitted && i.logo.errors"
                            style="color: red;"
                          >
                            <div *ngIf="i.logo.errors.required">
                              Company logo is required
                            </div>
                          </div>
                        </div>
                        <div *ngIf="image.company_logo">
                          <a href="{{ image.company_logo }}" target="_blank">
                            <i
                              class="{{ getFileExtension(image.company_logo) }}"
                              style="color: #5cb85c;"
                              aria-hidden="true"
                            ></i>
                            {{ imageName.company_logo }}</a
                          >
                          <a
                            class="deleteLocation"
                            href="javscript:;"
                            (click)="deleteImage('company_logo', 'logo')"
                            ><i aria-hidden="true" class="fa fa-trash"></i
                          ></a>
                        </div>
                      </div>
                      <div class="stepButtons">
                        <a
                          (click)="goPrevious()"
                          class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                          data-ktwizard-type="action-prev"
                        >
                          <span>
                            <i class="la la-angle-left"></i>
                            <span>Previous</span>
                          </span>
                        </a>
                        <button
                          type="submit"
                          class="pull-right btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                          data-ktwizard-type="action-next"
                        >
                          <span>
                            <span>Next Step</span>
                            <i class="la la-angle-right"></i>
                          </span>
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <!--begin: Form Wizard Step 6-->
              <div
                class="stepContainer"
                id="step1"
                [ngClass]="{
                  'is-display': isTabActive(5),
                  'is-hide': !isTabActive(5)
                }"
              >
                <div class="kt-heading kt-heading--md">
                  <h3>Review your Details and Submit</h3>
                </div>
                <div class="kt-form__section kt-form__section--first">
                  <div class="kt-wizard-v2__review">
                    <div class="kt-wizard-v2__review-item">
                      <div class="kt-wizard-v2__review-title">
                        Basic Information
                        <a class="stepEditLink" (click)="showTab(1)"
                          ><i class="far fa-edit"></i
                        ></a>
                      </div>
                      <div class="kt-wizard-v2__review-content">
                        <ul class="nostyle alignMe">
                          <li>
                            <strong>Company Name</strong>
                            {{ appData.agency_name }}
                          </li>
                          <li>
                            <strong>Phone</strong> {{ appData.phone_number }}
                          </li>
                          <li>
                            <strong>Year of Establishment</strong>
                            {{ appData.year_of_establishment }}
                          </li>
                          <li>
                            <strong>Website</strong> {{ appData.website }}
                          </li>
                          <li>
                            <strong>Owner Name</strong>
                            {{ appData.owner_name }}
                          </li>
                          <li>
                            <strong>Designation</strong>
                            {{ appData.designation }}
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="kt-wizard-v2__review-item">
                      <div class="kt-wizard-v2__review-title">
                        Locations
                        <a class="stepEditLink" (click)="showTab(2)"
                          ><i class="far fa-edit"></i
                        ></a>
                      </div>
                      <div
                        class="kt-wizard-v2__review-content"
                        *ngFor="let location of appData.users_locations"
                      >
                        {{ location.address }}<br />
                      </div>
                    </div>
                    <div class="kt-wizard-v2__review-item">
                      <div class="kt-wizard-v2__review-title">
                        About
                        <a class="stepEditLink" (click)="showTab(3)"
                          ><i class="far fa-edit"></i
                        ></a>
                      </div>
                      <div
                        class="kt-wizard-v2__review-content"
                        [innerHtml]="appData.about_company"
                      ></div>
                    </div>
                    <div class="stepButtons">
                      <button
                        (click)="goPrevious()"
                        class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                        data-ktwizard-type="action-prev"
                      >
                        <span>
                          <i class="la la-angle-left"></i>
                          <span>Previous</span>
                        </span>
                      </button>
                      <button
                        type="submit"
                        class="pull-right btn btn-success btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                        data-ktwizard-type="action-submit"
                        (click)="reviewSubmit(content)"
                      >
                        <span>
                          <span>Submit</span>
                          <i class="la la-angle-right"></i>
                        </span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!--end: Form Wizard Step 6-->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end:: Content -->
  </div>
</div>
<ng-template #content let-modal class="modal-dialog-centered">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">
      <span>Profile Completed</span>
    </h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click ')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="ticket-content mb-4">
      <p>
        {{ confirmMessage }}
      </p>
    </div>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="modal.close('Save click ')"
    >
      Ok
    </button>
  </div>
</ng-template>
